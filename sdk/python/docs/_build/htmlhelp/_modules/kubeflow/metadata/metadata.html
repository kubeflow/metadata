
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="cp1252" />
    <title>kubeflow.metadata.metadata</title>
    <link rel="stylesheet" href="../../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
          

          <div class="body" role="main">
            
  <h1>Source code for kubeflow.metadata.metadata</h1><div class="highlight"><pre>
<span></span><span class="c1"># Copyright 2019 kubeflow.org.</span>
<span class="c1">#</span>
<span class="c1"># Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);</span>
<span class="c1"># you may not use this file except in compliance with the License.</span>
<span class="c1"># You may obtain a copy of the License at</span>
<span class="c1">#</span>
<span class="c1">#      http://www.apache.org/licenses/LICENSE-2.0</span>
<span class="c1">#</span>
<span class="c1"># Unless required by applicable law or agreed to in writing, software</span>
<span class="c1"># distributed under the License is distributed on an &quot;AS IS&quot; BASIS,</span>
<span class="c1"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span>
<span class="c1"># See the License for the specific language governing permissions and</span>
<span class="c1"># limitations under the License.</span>

<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">ml_metadata</span>
<span class="kn">from</span> <span class="nn">ml_metadata.metadata_store</span> <span class="k">import</span> <span class="n">metadata_store</span>
<span class="kn">from</span> <span class="nn">ml_metadata.proto</span> <span class="k">import</span> <span class="n">metadata_store_pb2</span> <span class="k">as</span> <span class="n">mlpb</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Mapping</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Union</span>
<span class="sd">&quot;&quot;&quot;This module contains the Python API for logging metadata of machine learning</span>
<span class="sd">workflows to the Kubeflow Metadata service.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># TypeArtifact is the type Model, Dataset, Metrics or any class that has</span>
<span class="c1"># class variable ARTIFACT_TYPE_NAME of string and a serialization() method that</span>
<span class="c1"># returns a metadata_store_pb2.Artifact.</span>
<span class="n">TypeArtifact</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;TypeArtifact&#39;</span><span class="p">,</span> <span class="s1">&#39;Model&#39;</span><span class="p">,</span> <span class="s1">&#39;DataSet&#39;</span><span class="p">,</span> <span class="s1">&#39;Metrics&#39;</span><span class="p">,</span> <span class="n">Any</span><span class="p">)</span>

<span class="n">_WORKSPACE_PROPERTY_NAME</span> <span class="o">=</span> <span class="s1">&#39;__kf_workspace__&#39;</span>
<span class="n">_RUN_PROPERTY_NAME</span> <span class="o">=</span> <span class="s1">&#39;__kf_run__&#39;</span>
<span class="n">_ALL_META_PROPERTY_NAME</span> <span class="o">=</span> <span class="s1">&#39;__ALL_META__&#39;</span>


<div class="viewcode-block" id="Store"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Store">[docs]</a><span class="k">class</span> <span class="nc">Store</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Metadata Store that connects to the Metadata gRPC service.&quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">grpc_host</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;metadata-grpc-service.kubeflow&quot;</span><span class="p">,</span>
               <span class="n">grpc_port</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">8080</span><span class="p">,</span>
               <span class="n">root_certificates</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">private_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">certificate_chain</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">      grpc_host: Required gRPC service host, e.g.&quot;metadata-grpc-service.kubeflow&quot;.</span>
<span class="sd">      grpc_host: Required gRPC service port.</span>
<span class="sd">      root_certificates: Optional SSL certificate for secure connection.</span>
<span class="sd">      private_key: Optional private_key for secure connection.</span>
<span class="sd">      certificate_chain: Optional certificate_chain for secure connection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">config</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">MetadataStoreClientConfig</span><span class="p">()</span>
    <span class="n">config</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="n">grpc_host</span>
    <span class="n">config</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="n">grpc_port</span>
    <span class="k">if</span> <span class="n">root_certificates</span> <span class="ow">or</span> <span class="n">private_key</span> <span class="ow">or</span> <span class="n">certificate_chain</span><span class="p">:</span>
      <span class="n">config</span><span class="o">.</span><span class="n">ssl_config</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">SSLConfig</span><span class="p">()</span>
      <span class="n">config</span><span class="o">.</span><span class="n">ssl_config</span><span class="o">.</span><span class="n">client_key</span> <span class="o">=</span> <span class="n">private_key</span>
      <span class="n">config</span><span class="o">.</span><span class="n">ssl_config</span><span class="o">.</span><span class="n">custom_ca</span> <span class="o">=</span> <span class="n">root_certificates</span>
      <span class="n">config</span><span class="o">.</span><span class="n">ssl_config</span><span class="o">.</span><span class="n">server_cert</span> <span class="o">=</span> <span class="n">certificate_chain</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">store</span> <span class="o">=</span> <span class="n">metadata_store</span><span class="o">.</span><span class="n">MetadataStore</span><span class="p">(</span><span class="n">config</span><span class="p">,</span>
                                              <span class="n">disable_upgrade_migration</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>


<div class="viewcode-block" id="Workspace"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Workspace">[docs]</a><span class="k">class</span> <span class="nc">Workspace</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Groups a set of runs of pipelines, notebooks and their related artifacts</span>
<span class="sd">  and executions.</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">store</span><span class="p">:</span> <span class="n">Store</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">backend_url_prefix</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">      store: Required store object to connect to MLMD gRPC service.</span>
<span class="sd">      name: Required name for the workspace.</span>
<span class="sd">      description: Optional string for description of the workspace.</span>
<span class="sd">      labels: Optional key/value string pairs to label the workspace.</span>
<span class="sd">      backend_url_prefix: Deprecated. Please use &#39;store&#39; parameter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">backend_url_prefix</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;&#39;backend_url_prefix&#39; is deprecated. Please set</span>
<span class="s2">        Metadata.Store parameter to connect to the metadata gRPC service.&quot;&quot;&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;name&#39; must be set and in string type.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">store</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">store</span><span class="p">)</span> <span class="o">!=</span> <span class="n">Store</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;store&#39; must be set as metadata.Store&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">store</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">store</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>

<div class="viewcode-block" id="Workspace.list"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Workspace.list">[docs]</a>  <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artifact_type_name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">TypeArtifact</span><span class="p">]:</span>
    <span class="sd">&quot;&quot;&quot;List all artifacts of a given type.</span>

<span class="sd">    Args:</span>
<span class="sd">      artifact_type_name {str} name of artifact type.</span>
<span class="sd">      Returns a list of artifacts of the provided typed associated</span>
<span class="sd">      with this workspace. Each artifact is represented as a dict.</span>

<span class="sd">    Returns:</span>
<span class="sd">      A list of Artifact objects.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">artifact_type_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">artifact_type_name</span> <span class="o">=</span> <span class="n">Model</span><span class="o">.</span><span class="n">ARTIFACT_TYPE_NAME</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_type</span><span class="p">(</span><span class="n">artifact_type_name</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">artifact</span> <span class="ow">in</span> <span class="n">response</span><span class="p">:</span>
      <span class="n">flat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_flat</span><span class="p">(</span><span class="n">artifact</span><span class="p">)</span>
      <span class="k">if</span> <span class="s2">&quot;workspace&quot;</span> <span class="ow">in</span> <span class="n">flat</span> <span class="ow">and</span> <span class="n">flat</span><span class="p">[</span><span class="s2">&quot;workspace&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flat</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span></div>

  <span class="k">def</span> <span class="nf">_flat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artifact</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">artifact</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;artifact&#39; must be set.&quot;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">artifact</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">artifact</span><span class="o">.</span><span class="n">custom_properties</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">_WORKSPACE_PROPERTY_NAME</span> <span class="ow">in</span> <span class="n">artifact</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">:</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;workspace&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">[</span>
            <span class="n">_WORKSPACE_PROPERTY_NAME</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span>
      <span class="k">if</span> <span class="n">_RUN_PROPERTY_NAME</span> <span class="ow">in</span> <span class="n">artifact</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">:</span>
        <span class="n">result</span><span class="p">[</span><span class="s2">&quot;run&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">[</span>
            <span class="n">_RUN_PROPERTY_NAME</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">result</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">artifact</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
      <span class="k">if</span> <span class="n">k</span> <span class="o">!=</span> <span class="n">_ALL_META_PROPERTY_NAME</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">v</span><span class="o">.</span><span class="n">string_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
          <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">string_value</span>
        <span class="k">elif</span> <span class="n">v</span><span class="o">.</span><span class="n">int_value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
          <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">int_value</span>
        <span class="k">else</span><span class="p">:</span>
          <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">double_value</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">_ALL_META_PROPERTY_NAME</span> <span class="ow">in</span> <span class="n">artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">:</span>
      <span class="k">return</span> <span class="n">result</span>
    <span class="c1"># Pick up all nested objects stored in the __ALL_META__ field.</span>
    <span class="n">all_meta</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="n">_ALL_META_PROPERTY_NAME</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">all_meta</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
      <span class="k">if</span> <span class="ow">not</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
        <span class="n">result</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">v</span>
    <span class="k">return</span> <span class="n">result</span></div>


<div class="viewcode-block" id="Run"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Run">[docs]</a><span class="k">class</span> <span class="nc">Run</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Run captures a run of pipeline or notebooks in a workspace and group</span>
<span class="sd">  executions.</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">workspace</span><span class="p">:</span> <span class="n">Workspace</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">      workspace: Required workspace object to which this run belongs.</span>
<span class="sd">      name: Required name of this run.</span>
<span class="sd">      description: Optional description.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;workspace&#39; must be set.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;name&#39; must be set and in string type.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span> <span class="o">=</span> <span class="n">workspace</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span></div>


<div class="viewcode-block" id="Execution"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Execution">[docs]</a><span class="k">class</span> <span class="nc">Execution</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Captures a run of pipeline or notebooks in a workspace and group executions.</span>

<span class="sd">  Execution also serves as object for logging artifacts as its input or output.</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">EXECUTION_TYPE_NAME</span> <span class="o">=</span> <span class="s2">&quot;kubeflow.org/alpha/execution&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">workspace</span><span class="p">:</span> <span class="n">Workspace</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">run</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Run</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">      name: Required name of this run.</span>
<span class="sd">      workspace: Required workspace object where this execution belongs to.</span>
<span class="sd">      run: Optional run object.</span>
<span class="sd">      description: Optional description.</span>

<span class="sd">    Creates a new execution in a workspace and run.</span>
<span class="sd">    The execution.log_XXX() methods will attach corresponding artifacts as the</span>
<span class="sd">    input or output of this execution.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">workspace</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;workspace&#39; must be set.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;name&#39; must be set and in string type.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span> <span class="o">=</span> <span class="n">workspace</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">run</span> <span class="o">=</span> <span class="n">run</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">create_time</span> <span class="o">=</span> <span class="n">get_rfc3339_time</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_type_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_execution_type</span><span class="p">(</span>
        <span class="n">Execution</span><span class="o">.</span><span class="n">EXECUTION_TYPE_NAME</span><span class="p">)</span><span class="o">.</span><span class="n">id</span>
    <span class="n">response</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">put_executions</span><span class="p">([</span><span class="bp">self</span><span class="o">.</span><span class="n">serialized</span><span class="p">()])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

<div class="viewcode-block" id="Execution.serialized"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Execution.serialized">[docs]</a>  <span class="k">def</span> <span class="nf">serialized</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">properties</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
        <span class="s2">&quot;create_time&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_time</span><span class="p">),</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">),</span>
    <span class="p">}</span>
    <span class="n">_del_none_properties</span><span class="p">(</span><span class="n">properties</span><span class="p">)</span>

    <span class="n">custom_properties</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">custom_properties</span><span class="p">[</span><span class="n">_WORKSPACE_PROPERTY_NAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span>
          <span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">workspace</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">custom_properties</span><span class="p">[</span><span class="n">_RUN_PROPERTY_NAME</span><span class="p">]</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span>
          <span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Execution</span><span class="p">(</span><span class="n">type_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_type_id</span><span class="p">,</span>
                          <span class="n">properties</span><span class="o">=</span><span class="n">properties</span><span class="p">,</span>
                          <span class="n">custom_properties</span><span class="o">=</span><span class="n">custom_properties</span><span class="p">)</span></div>

<div class="viewcode-block" id="Execution.log_input"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Execution.log_input">[docs]</a>  <span class="k">def</span> <span class="nf">log_input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artifact</span><span class="p">:</span> <span class="n">TypeArtifact</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TypeArtifact</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Log an artifact as an input of this execution.</span>

<span class="sd">    Args:</span>
<span class="sd">      artifact: Model, DataSet, Metrics or customized artifact type.</span>

<span class="sd">    Returns:</span>
<span class="sd">      The same artifact with artifact.id set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">artifact</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;artifact&#39; must be set.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">artifact</span><span class="p">)</span>
    <span class="n">input_event</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">artifact_id</span><span class="o">=</span><span class="n">artifact</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                             <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                             <span class="nb">type</span><span class="o">=</span><span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">INPUT</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">put_events</span><span class="p">([</span><span class="n">input_event</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">artifact</span></div>

<div class="viewcode-block" id="Execution.log_output"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Execution.log_output">[docs]</a>  <span class="k">def</span> <span class="nf">log_output</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artifact</span><span class="p">:</span> <span class="n">TypeArtifact</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">TypeArtifact</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Log an artifact as an input of this execution.</span>

<span class="sd">    Args:</span>
<span class="sd">      artifact: Model, DataSet, Metrics or customized artifact type.</span>

<span class="sd">    Returns:</span>
<span class="sd">      The same artifact with artifact.id set.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">artifact</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;artifact&#39; must be set.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_log</span><span class="p">(</span><span class="n">artifact</span><span class="p">)</span>
    <span class="n">output_event</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="p">(</span><span class="n">artifact_id</span><span class="o">=</span><span class="n">artifact</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                              <span class="n">execution_id</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
                              <span class="nb">type</span><span class="o">=</span><span class="n">mlpb</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">OUTPUT</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">put_events</span><span class="p">([</span><span class="n">output_event</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">artifact</span></div>

  <span class="k">def</span> <span class="nf">_log</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">artifact</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Log artifact into metadata store.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">artifact</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;artifact&#39; must be set.&quot;</span><span class="p">)</span>
    <span class="n">ser</span> <span class="o">=</span> <span class="n">artifact</span><span class="o">.</span><span class="n">serialization</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="n">ser</span><span class="o">.</span><span class="n">type_id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">get_artifact_type</span><span class="p">(</span>
          <span class="n">artifact</span><span class="o">.</span><span class="n">ARTIFACT_TYPE_NAME</span><span class="p">)</span><span class="o">.</span><span class="n">id</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;invalid artifact type </span><span class="si">%s</span><span class="s2">: exception </span><span class="si">%s</span><span class="s2">&quot;</span><span class="p">,</span>
                       <span class="n">artifact</span><span class="o">.</span><span class="n">ARTIFACT_TYPE_NAME</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_WORKSPACE_PROPERTY_NAME</span> <span class="ow">in</span> <span class="n">ser</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;custom_properties contains reserved key </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                       <span class="n">_WORKSPACE_PROPERTY_NAME</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">_RUN_PROPERTY_NAME</span> <span class="ow">in</span> <span class="n">ser</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;custom_properties contains reserved key </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span>
                       <span class="n">_RUN_PROPERTY_NAME</span><span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">ser</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">[</span>
          <span class="n">_WORKSPACE_PROPERTY_NAME</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span><span class="o">.</span><span class="n">name</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
      <span class="n">ser</span><span class="o">.</span><span class="n">custom_properties</span><span class="p">[</span><span class="n">_RUN_PROPERTY_NAME</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run</span><span class="o">.</span><span class="n">name</span>
    <span class="n">artifact</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">put_artifacts</span><span class="p">([</span><span class="n">ser</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">artifact</span></div>


<div class="viewcode-block" id="DataSet"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.DataSet">[docs]</a><span class="k">class</span> <span class="nc">DataSet</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot; Dataset captures a data set in a machine learning workflow.</span>

<span class="sd">  Attributes:</span>

<span class="sd">    uri: Required uri of the data set.</span>
<span class="sd">    name: Required name of the data set.</span>
<span class="sd">    workspace: Optional name of the workspace.</span>
<span class="sd">    description: Optional description of the data set.</span>
<span class="sd">    owner: Optional owner of the data set.</span>
<span class="sd">    version: Optional version tagged by the user.</span>
<span class="sd">    query: Optional query string on how this data set being fetched from a data</span>
<span class="sd">      source.</span>
<span class="sd">    labels: Optional string key value pairs for labels.</span>

<span class="sd">    example:</span>
<span class="sd">      metadata.DataSet(description=&quot;an example data&quot;,</span>
<span class="sd">                       name=&quot;mytable-dump&quot;,</span>
<span class="sd">                       owner=&quot;owner@my-company.org&quot;,</span>
<span class="sd">                       uri=&quot;file://path/to/dataset&quot;,</span>
<span class="sd">                       version=&quot;v1.0.0&quot;,</span>
<span class="sd">                       query=&quot;SELECT * FROM mytable&quot;,</span>
<span class="sd">                       labels={&quot;label1&quot;,&quot;val1&quot;}))</span>
<span class="sd">  &quot;&quot;&quot;</span>
  <span class="n">ARTIFACT_TYPE_NAME</span> <span class="o">=</span> <span class="s2">&quot;kubeflow.org/alpha/data_set&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">workspace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">owner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">query</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">      uri: Required uri of the data set.</span>
<span class="sd">      name: Required name of the data set.</span>
<span class="sd">      workspace: Optional name of the workspace.</span>
<span class="sd">      description: Optional description of the data set.</span>
<span class="sd">      owner: Optional owner of the data set.</span>
<span class="sd">      version: Optional version tagged by the user.</span>
<span class="sd">      query: Optional query string on how this data set being fetched from</span>
<span class="sd">        a data source.</span>
<span class="sd">      labels: Optional string key value pairs for labels.</span>
<span class="sd">      kwargs: Optional additional keyword arguments are saved as additional</span>
<span class="sd">        properties of this dataset.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">uri</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;uri&#39; must be set and in string type.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;name&#39; must be set and in string type.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span> <span class="o">=</span> <span class="n">workspace</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">owner</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">query</span> <span class="o">=</span> <span class="n">query</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">create_time</span> <span class="o">=</span> <span class="n">get_rfc3339_time</span><span class="p">()</span>

<div class="viewcode-block" id="DataSet.serialization"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.DataSet.serialization">[docs]</a>  <span class="k">def</span> <span class="nf">serialization</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">data_set_artifact</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span><span class="p">(</span>
        <span class="n">uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span>
        <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;create_time&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_time</span><span class="p">),</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">),</span>
            <span class="s2">&quot;query&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">query</span><span class="p">),</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">),</span>
            <span class="s2">&quot;owner&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">),</span>
            <span class="n">_ALL_META_PROPERTY_NAME</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)),</span>
        <span class="p">})</span>
    <span class="n">_del_none_properties</span><span class="p">(</span><span class="n">data_set_artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data_set_artifact</span></div></div>


<div class="viewcode-block" id="Model"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Model">[docs]</a><span class="k">class</span> <span class="nc">Model</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Captures a machine learning model.</span>

<span class="sd">  Attributes:</span>
<span class="sd">      uri: Required uri of the metrics.</span>
<span class="sd">      name: Required name of the metrics.</span>
<span class="sd">      workspace: Optional name of the workspace.</span>
<span class="sd">      description: Optional description of the metrics.</span>
<span class="sd">      owner: Optional owner of the metrics.</span>
<span class="sd">      model_type: Optional type of the model.</span>
<span class="sd">      training_framework: Optional framework used to train the model.</span>
<span class="sd">      hyperparameters: Optional map from hyper param name to its value.</span>
<span class="sd">      labels: Optional string key value pairs for labels.</span>
<span class="sd">      kwargs: Optional additional keyword arguments are saved as additional</span>
<span class="sd">        properties of this model.</span>

<span class="sd">      example:</span>
<span class="sd">        metadata.Model(name=&quot;MNIST&quot;,</span>
<span class="sd">                       description=&quot;model to recognize handwritten digits&quot;,</span>
<span class="sd">                       owner=&quot;someone@kubeflow.org&quot;,</span>
<span class="sd">                       uri=&quot;gcs://my-bucket/mnist&quot;,</span>
<span class="sd">                       model_type=&quot;neural network&quot;,</span>
<span class="sd">                       training_framework={</span>
<span class="sd">                           &quot;name&quot;: &quot;tensorflow&quot;,</span>
<span class="sd">                           &quot;version&quot;: &quot;v1.0&quot;</span>
<span class="sd">                       },</span>
<span class="sd">                       hyperparameters={</span>
<span class="sd">                           &quot;learning_rate&quot;: 0.5,</span>
<span class="sd">                           &quot;layers&quot;: [10, 3, 1],</span>
<span class="sd">                           &quot;early_stop&quot;: True</span>
<span class="sd">                       },</span>
<span class="sd">                       version=&quot;v0.0.1&quot;,</span>
<span class="sd">                       labels={&quot;mylabel&quot;: &quot;l1&quot;}))</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="n">ARTIFACT_TYPE_NAME</span> <span class="o">=</span> <span class="s2">&quot;kubeflow.org/alpha/model&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">workspace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">owner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">model_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">training_framework</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">hyperparameters</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">      uri: Required uri of the metrics.</span>
<span class="sd">      name: Required name of the metrics.</span>
<span class="sd">      workspace: Optional name of the workspace.</span>
<span class="sd">      description: Optional description of the metrics.</span>
<span class="sd">      owner: Optional owner of the metrics.</span>
<span class="sd">      model_type: Optional type of the model.</span>
<span class="sd">      training_framework: Optional framework used to train the model.</span>
<span class="sd">      hyperparameters: Optional map from hyper param name to its value.</span>
<span class="sd">      labels: Optional string key value pairs for labels.</span>
<span class="sd">      kwargs: Optional additional keyword arguments are saved as additional</span>
<span class="sd">        properties of this model.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">uri</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;uri&#39; must be set and in string type.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;name&#39; must be set and in string type.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span> <span class="o">=</span> <span class="n">workspace</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">owner</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">version</span> <span class="o">=</span> <span class="n">version</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_type</span> <span class="o">=</span> <span class="n">model_type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">training_framework</span> <span class="o">=</span> <span class="n">training_framework</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">hyperparameters</span> <span class="o">=</span> <span class="n">hyperparameters</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">create_time</span> <span class="o">=</span> <span class="n">get_rfc3339_time</span><span class="p">()</span>

<div class="viewcode-block" id="Model.serialization"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Model.serialization">[docs]</a>  <span class="k">def</span> <span class="nf">serialization</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">model_artifact</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span><span class="p">(</span>
        <span class="n">uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span>
        <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;create_time&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_time</span><span class="p">),</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">),</span>
            <span class="s2">&quot;model_type&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_type</span><span class="p">),</span>
            <span class="s2">&quot;version&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">version</span><span class="p">),</span>
            <span class="s2">&quot;owner&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">),</span>
            <span class="n">_ALL_META_PROPERTY_NAME</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)),</span>
        <span class="p">})</span>
    <span class="n">_del_none_properties</span><span class="p">(</span><span class="n">model_artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">model_artifact</span></div></div>


<div class="viewcode-block" id="Metrics"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Metrics">[docs]</a><span class="k">class</span> <span class="nc">Metrics</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  <span class="sd">&quot;&quot;&quot;Captures an evaluation metrics of a model on a data set.</span>

<span class="sd">  Attributes:</span>
<span class="sd">    uri: Required uri of the metrics.</span>
<span class="sd">    name: Required name of the metrics.</span>
<span class="sd">    workspace: Optional name of the workspace.</span>
<span class="sd">    description: Optional description of the metrics.</span>
<span class="sd">    owner: Optional owner of the metrics.</span>
<span class="sd">    data_set_id: Optional id of the data set used for evaluation.</span>
<span class="sd">    model_id: Optional id of a evaluated model.</span>
<span class="sd">    metrics_type: Optional type of the evaluation.</span>
<span class="sd">    values: Optional map from metrics name to its value.</span>
<span class="sd">    labels: Optional string key value pairs for labels.</span>

<span class="sd">    example:</span>
<span class="sd">        metadata.Metrics(name=&quot;MNIST-evaluation&quot;,</span>
<span class="sd">            description=</span>
<span class="sd">            &quot;validating the MNIST model to recognize handwritten digits&quot;,</span>
<span class="sd">            owner=&quot;someone@kubeflow.org&quot;,</span>
<span class="sd">            uri=&quot;gcs://my-bucket/mnist-eval.csv&quot;,</span>
<span class="sd">            data_set_id=&quot;123&quot;,</span>
<span class="sd">            model_id=&quot;12345&quot;,</span>
<span class="sd">            metrics_type=metadata.Metrics.VALIDATION,</span>
<span class="sd">            values={&quot;accuracy&quot;: 0.95},</span>
<span class="sd">            labels={&quot;mylabel&quot;: &quot;l1&quot;}))</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="n">ARTIFACT_TYPE_NAME</span> <span class="o">=</span> <span class="s2">&quot;kubeflow.org/alpha/metrics&quot;</span>

  <span class="c1"># Possible evaluation metrics types.</span>
  <span class="n">TRAINING</span> <span class="o">=</span> <span class="s2">&quot;training&quot;</span>
  <span class="n">VALIDATION</span> <span class="o">=</span> <span class="s2">&quot;validation&quot;</span>
  <span class="n">TESTING</span> <span class="o">=</span> <span class="s2">&quot;testing&quot;</span>
  <span class="n">PRODUCTION</span> <span class="o">=</span> <span class="s2">&quot;production&quot;</span>

  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span>
               <span class="n">uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">workspace</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">description</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">owner</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">data_set_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">model_id</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">metrics_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">values</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="n">labels</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Mapping</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
               <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">      uri: Required uri of the metrics.</span>
<span class="sd">      name: Required name of the metrics.</span>
<span class="sd">      workspace: Optional name of the workspace.</span>
<span class="sd">      description: Optional description of the metrics.</span>
<span class="sd">      owner: Optional owner of the metrics.</span>
<span class="sd">      data_set_id: Optional id of the data set used for evaluation.</span>
<span class="sd">      model_id: Optional id of a evaluated model.</span>
<span class="sd">      metrics_type: Optional type of the evaluation.</span>
<span class="sd">      values: Optional map from metrics name to its value.</span>
<span class="sd">      labels: Optional string key value pairs for labels.</span>
<span class="sd">      kwargs: additional keyword arguments are saved as additional properties</span>
<span class="sd">        of this metrics.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">uri</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;uri&#39; must be set and in string type.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">str</span><span class="p">:</span>
      <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;&#39;name&#39; must be set and in string type.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">workspace</span> <span class="o">=</span> <span class="n">workspace</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">description</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">owner</span> <span class="o">=</span> <span class="n">owner</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">uri</span> <span class="o">=</span> <span class="n">uri</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">data_set_id</span> <span class="o">=</span> <span class="n">data_set_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">model_id</span> <span class="o">=</span> <span class="n">model_id</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">metrics_type</span> <span class="o">=</span> <span class="n">metrics_type</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="n">values</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">create_time</span> <span class="o">=</span> <span class="n">get_rfc3339_time</span><span class="p">()</span>

<div class="viewcode-block" id="Metrics.serialization"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.Metrics.serialization">[docs]</a>  <span class="k">def</span> <span class="nf">serialization</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">metrics_artifact</span> <span class="o">=</span> <span class="n">mlpb</span><span class="o">.</span><span class="n">Artifact</span><span class="p">(</span>
        <span class="n">uri</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">uri</span><span class="p">,</span>
        <span class="n">properties</span><span class="o">=</span><span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
            <span class="s2">&quot;create_time&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">create_time</span><span class="p">),</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">description</span><span class="p">),</span>
            <span class="s2">&quot;metrics_type&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">metrics_type</span><span class="p">),</span>
            <span class="s2">&quot;data_set_id&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">data_set_id</span><span class="p">),</span>
            <span class="s2">&quot;model_id&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">model_id</span><span class="p">),</span>
            <span class="s2">&quot;owner&quot;</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">owner</span><span class="p">),</span>
            <span class="n">_ALL_META_PROPERTY_NAME</span><span class="p">:</span>
                <span class="n">mlpb</span><span class="o">.</span><span class="n">Value</span><span class="p">(</span><span class="n">string_value</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">)),</span>
        <span class="p">})</span>
    <span class="n">_del_none_properties</span><span class="p">(</span><span class="n">metrics_artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">metrics_artifact</span></div></div>


<div class="viewcode-block" id="get_rfc3339_time"><a class="viewcode-back" href="../../../source/md.html#kubeflow.metadata.metadata.get_rfc3339_time">[docs]</a><span class="k">def</span> <span class="nf">get_rfc3339_time</span><span class="p">():</span>
  <span class="k">return</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">isoformat</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;Z&quot;</span></div>


<span class="k">def</span> <span class="nf">_del_none_properties</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
  <span class="n">keys</span> <span class="o">=</span> <span class="p">[</span><span class="n">k</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>
  <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">((</span><span class="nb">dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">int_value</span><span class="p">,</span> <span class="nb">dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">double_value</span><span class="p">)):</span>
      <span class="k">del</span> <span class="nb">dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span>
</pre></div>

          </div>
          
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Google.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
    </div>

    

    
  </body>
</html>